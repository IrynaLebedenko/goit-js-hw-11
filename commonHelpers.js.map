{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst fetchImageForm = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst userInput = document.querySelector('input');\nconst container = document.querySelector('.container');\n\n// Function showing the loader\nconst showLoader = () => {\n  const loader = document.createElement('span');\n  loader.classList.add('loader');\n  container.append(loader);\n};\n\n// Function hiding the loader\nconst hidingLoader = () => {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.remove();\n  }\n};\n\nconst options = {\n    captions: true,\n    captionSelector: 'img',\n    captionType: 'attr',\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    animation: 250,\n  };\nconst lightbox = new SimpleLightbox('.gallery a', options);\n\nfetchImageForm.addEventListener('submit', event => {\n  showLoader();\n  event.preventDefault(); \n  \n  gallery.innerHTML = '';\n  const pixabayApiKey = '42400311-c577e995298d386a6e7116ddb';\n  const query = userInput.value.trim();\n  if(!query){\n    iziToast.error({\n        backgroundColor: '#EF4040',\n        message:\n          'Please. enter a search query!',\n        position: 'topRight',\n      });\n      hidingLoader();\n    return;\n  }\n\n  //Make a request to the API\n  fetch(\n    `https://pixabay.com/api/?key=${pixabayApiKey}&q=${encodeURIComponent(\n      query\n    )}&image_type=photo&orientation=horizontal&safesearch=true`\n  )\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    .then(data => {\n      if (!data.hits.length) {\n        iziToast.error({\n          title: '',\n          backgroundColor: '#EF4040',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n        });\n      } else {\n        const markup = data.hits\n        .map(data => {\n            return ` <li class=\"gallery-item\">\n      <a href=\"${data.webformatURL}\">\n        <img class=\"gallery-image\" src=\"${data.webformatURL}\" alt=\"${data.tags}\">\n      </a>\n      <div class=\"image-details\">\n        <div class=\"image-text\">\n        <p><b class=\"image-text-width\">Likes: </b>${data.likes}</p>\n        <p><b class=\"image-text-width\">Views: </b>${data.views}</p>\n        <p><b class=\"image-text-width\">Comments: </b>${data.comments}</p>\n        <p><b class=\"image-text-width\">Downloads: </b>${data.downloads}</p>\n        </div>\n      </div>\n    </li>`;\n          })\n          .join('');\n      gallery.insertAdjacentHTML('afterbegin', markup);\n      lightbox.refresh();\n      fetchPicturesForm.reset();\n      }\n    })\n    .catch(error => {\n      console.log(error);\n    })\n    .finally(() => {\n      hidingLoader();\n    });\n});\n\n"],"names":["fetchImageForm","gallery","userInput","container","showLoader","loader","hidingLoader","options","lightbox","SimpleLightbox","event","pixabayApiKey","query","iziToast","response","data","markup","error"],"mappings":"6vBAKA,MAAMA,EAAiB,SAAS,cAAc,OAAO,EAC/CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAY,SAAS,cAAc,OAAO,EAC1CC,EAAY,SAAS,cAAc,YAAY,EAG/CC,EAAa,IAAM,CACvB,MAAMC,EAAS,SAAS,cAAc,MAAM,EAC5CA,EAAO,UAAU,IAAI,QAAQ,EAC7BF,EAAU,OAAOE,CAAM,CACzB,EAGMC,EAAe,IAAM,CACzB,MAAMD,EAAS,SAAS,cAAc,SAAS,EAC3CA,GACFA,EAAO,OAAM,CAEjB,EAEME,EAAU,CACZ,SAAU,GACV,gBAAiB,MACjB,YAAa,OACb,aAAc,MACd,gBAAiB,SACjB,UAAW,GACf,EACMC,EAAW,IAAIC,EAAe,aAAcF,CAAO,EAEzDP,EAAe,iBAAiB,SAAUU,GAAS,CACjDN,IACAM,EAAM,eAAc,EAEpBT,EAAQ,UAAY,GACpB,MAAMU,EAAgB,qCAChBC,EAAQV,EAAU,MAAM,KAAI,EAClC,GAAG,CAACU,EAAM,CACRC,EAAS,MAAM,CACX,gBAAiB,UACjB,QACE,gCACF,SAAU,UAClB,CAAO,EACDP,IACF,MACD,CAGD,MACE,gCAAgCK,CAAa,MAAM,mBACjDC,CACD,CAAA,0DACF,EACE,KAAKE,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACtB,CAAK,EACA,KAAKC,GAAQ,CACZ,GAAI,CAACA,EAAK,KAAK,OACbF,EAAS,MAAM,CACb,MAAO,GACP,gBAAiB,UACjB,QACE,2EACF,SAAU,UACpB,CAAS,MACI,CACL,MAAMG,EAASD,EAAK,KACnB,IAAIA,GACM;AAAA,iBACFA,EAAK,YAAY;AAAA,0CACQA,EAAK,YAAY,UAAUA,EAAK,IAAI;AAAA;AAAA;AAAA;AAAA,oDAI1BA,EAAK,KAAK;AAAA,oDACVA,EAAK,KAAK;AAAA,uDACPA,EAAK,QAAQ;AAAA,wDACZA,EAAK,SAAS;AAAA;AAAA;AAAA,UAI3D,EACA,KAAK,EAAE,EACZd,EAAQ,mBAAmB,aAAce,CAAM,EAC/CR,EAAS,QAAO,EAChB,kBAAkB,MAAK,CACtB,CACP,CAAK,EACA,MAAMS,GAAS,CACd,QAAQ,IAAIA,CAAK,CACvB,CAAK,EACA,QAAQ,IAAM,CACbX,GACN,CAAK,CACL,CAAC"}